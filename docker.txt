# Use Ubuntu 24.04 slim as base
FROM ubuntu:24.04

# Set environment variables
ENV JAVA_VERSION=8u392
ENV JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
ENV MAVEN_VERSION=3.9.9
ENV MAVEN_HOME=/opt/maven
ENV PATH=$MAVEN_HOME/bin:$JAVA_HOME/bin:$PATH

# Install dependencies
RUN apt-get update && \
    apt-get install -y wget curl tar git openjdk-8-jdk && \
    rm -rf /var/lib/apt/lists/*

# Install Maven
RUN wget https://dlcdn.apache.org/maven/maven-3/${MAVEN_VERSION}/binaries/apache-maven-${MAVEN_VERSION}-bin.tar.gz -P /tmp && \
    tar -xzf /tmp/apache-maven-${MAVEN_VERSION}-bin.tar.gz -C /opt && \
    ln -s /opt/apache-maven-${MAVEN_VERSION} /opt/maven && \
    rm /tmp/apache-maven-${MAVEN_VERSION}-bin.tar.gz

# Verify installations
RUN java -version && mvn -version

# Set working directory
WORKDIR /app

# Default command
CMD ["/bin/bash"]
